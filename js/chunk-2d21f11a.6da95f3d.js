(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f11a"],{d7f7:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"item-wrap"},[s("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("table",{staticClass:"table"},[t._m(0),s("tbody",{staticClass:"cart-items"},t._l(t.cart.carts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle d-md-table-cell"},[s("div",{staticClass:"product-preview d-md-block",style:{backgroundImage:"url("+a.product.imageUrl+")"}})]),s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?s("div",{staticClass:"text-danger"},[t._v("已套用優惠券")]):t._e()]),s("td",{staticClass:"align-middle d-sm-table-cell d-none qty-adjust"},[s("input",{staticClass:"btn",attrs:{type:"button",value:"-"},on:{click:function(s){return t.quantitySub(a)}}}),s("input",{attrs:{type:"text",readonly:"readonly"},domProps:{value:a.qty}}),s("input",{staticClass:"btn",attrs:{type:"button",value:"+"},on:{click:function(s){return t.quantityPlus(a)}}})]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(t._f("currency")(a.product.price))+" / "+t._s(t._f("currency")(a.total))+" "),a.coupon?s("div",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(a.final_total)))]):t._e()]),s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCart(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])})),0),s("tfoot",{staticClass:"sales-price"},[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"text-right text-right-red",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-right-red"},[t._v(t._s(t._f("currency")(Math.round(t.cart.final_total))))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"套用優惠碼"},on:{click:function(a){return a.preventDefault(),t.addCouponCode()}}}),s("div",{staticClass:"coupon-message"},[t._v(t._s(this.focus))])])]),s("div",{staticClass:"d-flex justify-content-between mt-4 step-control"},[s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/home"}},[t._v("返回賣場")]),t.nextPage?s("router-link",{staticClass:"btn btn-danger",attrs:{to:"front_order"}},[t._v("下一步")]):t._e()],1)],1)},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{staticClass:"d-md-table-cell"},[t._v("產品圖")]),s("th",[t._v("產品名稱")]),s("th",{staticClass:"d-sm-table-cell d-none",attrs:{width:"120px"}},[t._v("數量")]),s("th",{attrs:{width:"25%"}},[t._v("價格")]),s("th",{attrs:{width:"60px"}},[t._v("刪除")])])])}],i=(s("99af"),{name:"FrontCartItems",data:function(){return{coupon_code:"",focus:""}},methods:{updateCart:function(t,a,s){this.$store.dispatch("updateCart",{id:t,productId:a,qty:s})},getCart:function(){this.$store.dispatch("getCart")},removeCart:function(t){this.$store.dispatch("removeCart",t)},quantitySub:function(t){t.qty>1&&this.updateCart(t.id,t.product_id,t.qty-1)},quantityPlus:function(t){t.qty<20&&this.updateCart(t.id,t.product_id,t.qty+1)},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jim55167","/coupon"),s={code:this.coupon_code};this.$store.dispatch("updateLoading",!0),this.$http.post(a,{data:s}).then((function(a){t.focus=a.data.message,t.getCart(),t.$store.dispatch("updateLoading",!1)}))}},computed:{cart:function(){return this.$store.state.cart},isLoading:function(){return this.$store.state.isLoading},nextPage:function(){return 0!==this.cart.carts}},created:function(){this.getCart()}}),o=i,r=s("2877"),c=Object(r["a"])(o,e,n,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d21f11a.6da95f3d.js.map